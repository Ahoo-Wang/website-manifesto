@main("リアクティブ宣言") {
    <div id="sign">
        <span class="close">×</span>
        <div data-bind="with: loggedInUser">
            <a class="logout" href="#" data-bind="click: $root.logOut">ログアウト</a>
            <p>
                <span data-bind="text: name"></span> さん、
            </p>
            <hr/>
            <div class="inner" data-bind="ifnot: $data.signed">
                <button data-bind="click: $root.sign" class="vote">
                    署名を追加する (<span data-bind="text: $root.total"></span>)
                </button>
            </div>
            <div class="inner" data-bind="if: $data.signed">
                <p>
                    ありがとう。他の人にも伝えて下さい!
                </p>
                <button data-bind="click: $root.unsign" class="vote unvote">
                    署名を取り消す
                </button>
            </div>
        </div>
        <div data-bind="ifnot: loggedInUser">
            <p>
                署名にはログインが必要です。
            </p>
            <hr/>
            <div class="inner">

                <button data-bind="click: logInTwitter" class="btn btn-twitter">
                    Twitter で署名する
                </button>

                <button data-bind="click: logInGitHub" class="btn btn-github">
                    GitHub で署名する
                </button>

                <button data-bind="click: logInGoogle" class="btn btn-google">
                    Google で署名する
                </button>

                <button data-bind="click: logInLinkedIn" class="btn btn-linkedin">
                    LinkedIn で署名する
                </button>
            </div>
        </div>
    </div>
    <main>
        <header>
            <h1>リアクティブ宣言</h1>
            <aside>
                <p>
                    @ja.manifestoVersion()
                </p>

            </aside>
        </header>




        <article>

            @ja.manifesto()

            <div class="sign">
                <button data-bind="click: signTheManifesto, clickBubble: false">宣言に署名する</button>
            </div>


        </article>
        <p class="signatures">
            <span data-bind="ifnot: total">読み込み中...</span>
            <span data-bind="if: total">
                <span data-bind="template: { name: 'total-template', data: total }"></span>
            </span>
        </p>
        <div data-bind="if: signatories" class="signatures">
            <span data-bind="template: { name: 'signatories-template', data: signatories }"></span>
        </div>

        <article class="social">
                    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
                    <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Freactivemanifesto.org&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=17899947359" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe>
                    <div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://reactivemanifesto.org"></div>
                    <script type="IN/Share" data-url="http://reactivemanifesto.org" data-counter="right"></script>
                <p>
                    <a class="" href="/ja/glossary">用語集</a>
                </p>

                <p>
                    <a class="pdf" href="@routes.Assets.at("pdf/the-reactive-manifesto-2.0-ja.pdf")">PDF としてダウンロードする</a>
                </p>
                <p>
                    <a class="pdf" href="https://github.com/reactivemanifesto/reactivemanifesto/blob/master/README.ja.md">改善点を提案する</a>
                </p>
        </article>

        @footer()

    </main>
    <script type="text/html" id="total-template">
        <span data-bind="text: $data"></span> 名の人が署名しました (<a href="/ja/list">署名のリスト</a>)
    </script>

    <script type="text/html" id="signatories-template">
        <ul class="full" data-bind="foreach: $data">
            <li>
                <span data-bind="if: $data.avatarUrl">
                    <img class="avatar" data-bind="attr: { src: $data.avatarUrl }" width="25" height="25"/>
                </span>
                <cite class="user" data-bind="text: name"></cite>
            </li>
        </ul>
    </script>

    <script type="text/javascript">
    ;(function() {

        // Element
        var headerMinimized = $("#headerMinimized"),
            header = $("header");

        // Duplicate the header to play with
        headerMinimized.html(header.html());

        // Toggle table of content display
        headerMinimized.click(function() {
            $("body").toggleClass("opened");
        });

        $("main").click(function() {
            $("body").removeClass("opened");
            $("body").removeClass("signing");
        });

        $(".close").click(function() {
            $("body").removeClass("opened");
            $("body").removeClass("signing");
        });

        // Show table of content on scroll
        window.onscroll = function() {
            if (window.pageYOffset > 800) {
                $("body").addClass("display");
            } else {
                $("body").removeClass("display");
            }
            // Always hide menu when scrolling
            $("body").removeClass("opened");
        };
    }());


    // SHARE BUTTONS
    // Twitter
    ;(function(d,s,id){
        var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}
    }(document, 'script', 'twitter-wjs'));

    // Google
    ;(function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    }());
    </script>
    <script src="http://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
}
